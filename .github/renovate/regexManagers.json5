{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  customManagers: [
    {
      customType: "regex",
      description: "Cloudnative Postgres container",
      fileMatch: [
        "kubernetes/apps/databases/cloudnative-pg/clusters/postgres-cluster.yaml",
      ],
      matchStrings: ["imageName: (?<depName>.*?):(?<currentValue>.*)"],
      datasourceTemplate: "docker",
    },
    {
      customType: "regex",
      description: "Process Kubernetes versions",
      fileMatch: [
        "infrastructure/talos/talconfig.yaml",
        "infrastructure/talos/upgrade-k8s.sh",
      ],
      matchStrings: [
        "kubernetes_version: (?<currentValue>.*)",
        "kubernetesVersion: (?<currentValue>.*)",
        "--to (?<currentValue>.*)",
      ],
      depNameTemplate: "ghcr.io/siderolabs/kubelet",
      datasourceTemplate: "docker",
    },
    {
      customType: "regex",
      description: "Process Talos versions",
      fileMatch: [
        "infrastructure/talos/common.sh",
        "infrastructure/talos/talconfig.yaml",
      ],
      matchStrings: [
        "talosVersion: (?<currentValue>.*)",
        "installer:(?<currentValue>.*)",
      ],
      depNameTemplate: "ghcr.io/siderolabs/installer",
      datasourceTemplate: "docker",
    },
    {
      customType: "regex",
      description: "Process CLI versions",
      fileMatch: [".taskfiles/.+\\.yaml$"],
      matchStrings: [
        "github.com/(?<depName>.*?)/releases/download/(?<currentValue>[a-z0-9.]*)",
      ],
      datasourceTemplate: "github-releases",
    },
  ],
}
