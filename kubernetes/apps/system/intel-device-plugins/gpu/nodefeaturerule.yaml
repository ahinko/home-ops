---
# Extended NodeFeatureRule for all Intel GPUs (integrated + Arc)
apiVersion: nfd.k8s-sigs.io/v1alpha1
kind: NodeFeatureRule
metadata:
  name: intel-gpu-detection-rule
spec:
  rules:
    # Base Intel GPU detection (your existing rule)
    - name: intel.gpu
      labels:
        "intel.feature.node.kubernetes.io/gpu": "true"
        "intel.feature.node.kubernetes.io/drm": "true"
      matchFeatures:
        - feature: pci.device
          matchExpressions:
            vendor: { op: In, value: ["8086"] }
            class: { op: In, value: ["0300", "0380"] }

    # Arc-specific GPU detection (includes your Ultra 5 125H Arc graphics)
    - name: intel.gpu.arc
      labels:
        "intel.feature.node.kubernetes.io/gpu-product": "arc"
        "intel.feature.node.kubernetes.io/gpu-tier": "discrete"
        "intel.feature.node.kubernetes.io/drm-i915": "true"
      matchFeatures:
        - feature: pci.device
          matchExpressions:
            vendor: { op: In, value: ["8086"] }
            class: { op: In, value: ["0300", "0380"] }
            device:
              {
                op: In,
                value:
                  [
                    "7d55",
                    "56a0",
                    "56a1",
                    "56a5",
                    "56a6",
                    "5690",
                    "5691",
                    "5692",
                    "5693",
                    "5694",
                    "5695",
                    "56b0",
                    "56b1",
                    "46d0",
                    "46d1",
                    "46d2",
                    "7d51",
                  ],
              }
