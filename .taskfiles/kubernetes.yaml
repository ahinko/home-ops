---
version: 3

tasks:
  update-client-certificate:
    desc: Get an updated version of kubeconfig with updated/rotated certificates
    cmds:
      - talosctl kubeconfig ~/.kube/configs/metal -n 192.168.20.21
      - kubectl config rename-context admin@metal metal
    silent: true

  provision:
    desc: Provision cluster
    silent: true
    cmds:
      - ./infrastructure/talos/provision.sh
